(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{22:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var r=n(3),a=n(17),c=n.n(a),o=(n(22),n(1)),s=n.n(o),u=n(4),i=n(6),d=n(0),b=function(e){var t=e.setFilter;return Object(d.jsxs)("div",{children:["filter show with"," ",Object(d.jsx)("input",{onChange:function(e){return t(e.target.value.toLowerCase())}})]})},p=n(5),f=n(7),j=n.n(f),l="/api/persons",O=function(){var e=Object(u.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get(l);case 2:return t=e.sent,console.log(t),e.abrupt("return",t.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(u.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.post(l,t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(u.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.patch("".concat(l,"/").concat(t.id),t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.a.delete("".concat(l,"/").concat(t.id));case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return","error");case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),x=function(e){var t=e.setPersons,n=e.persons,a=e.setNotification,c=Object(r.useState)(""),o=Object(i.a)(c,2),b=o[0],f=o[1],j=Object(r.useState)(""),l=Object(i.a)(j,2),O=l[0],m=l[1],x=function(){var e=Object(u.a)(s.a.mark((function e(r){var c,o,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),O&&b||a({message:"Name and Number required",type:"error"}),c=n.find((function(e){return e.name===b}))){e.next=9;break}return e.next=6,h({name:b,number:O});case 6:return o=e.sent,a({message:"Added ".concat(o.name),type:"add"}),e.abrupt("return",t(n.concat(o)));case 9:if(c.number===O){e.next=16;break}return e.next=12,v(Object(p.a)(Object(p.a)({},c),{},{number:O}));case 12:return u=e.sent,t(n.filter((function(e){return e.id!==u.id})).concat(u)),a({message:"Updated ".concat(u.name),type:"update"}),e.abrupt("return");case 16:window.alert("".concat(b," is already added to the phonebook"));case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)("form",{onSubmit:x,children:[Object(d.jsxs)("div",{children:["name:"," ",Object(d.jsx)("input",{onChange:function(e){return f(e.target.value)},value:b})]}),Object(d.jsxs)("div",{children:["phone:"," ",Object(d.jsx)("input",{onChange:function(e){return m(e.target.value)},value:O})]}),Object(d.jsx)("div",{children:Object(d.jsx)("button",{type:"submit",children:"add"})})]})},g=function(e){var t=e.persons,n=e.filter,r=e.setPersons,a=e.setNotification,c=function(){var e=Object(u.a)(s.a.mark((function e(n){var c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(t.filter((function(e){return e.id!==n.id}))),e.next=3,m(n);case 3:c=e.sent,a("error"!==c?{message:"Deleted ".concat(n.name),type:"remove"}:{message:"Information of ".concat(n.name," already been removed from server"),type:"error"});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsx)(d.Fragment,{children:t.filter((function(e){return e.name.toLowerCase().includes(n||"")})).map((function(e,t){return Object(d.jsxs)("div",{children:[e.name," : ",e.number," ",Object(d.jsx)("button",{onClick:function(){return c(e)},children:"delete"})]},t)}))})},w={border:"solid",width:"fit-content",backgroundColor:"lightgray",padding:"15px",marginBottom:"20px",borderRadius:"12px"},y={add:Object(p.a)(Object(p.a)({},w),{},{borderColor:"green"}),update:Object(p.a)(Object(p.a)({},w),{},{borderColor:"yellowgreen"}),remove:Object(p.a)({},w),error:Object(p.a)(Object(p.a)({},w),{},{borderColor:"red"})},k=function(e){var t=e.notification,n=t.message,r=t.type;return n?Object(d.jsx)("div",{style:y[r],children:Object(d.jsx)("div",{children:n})}):null},C=function(){var e=Object(r.useState)([]),t=Object(i.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),o=Object(i.a)(c,2),p=o[0],f=o[1],j=Object(r.useState)(null),l=Object(i.a)(j,2),h=l[0],v=l[1];Object(r.useEffect)((function(){Object(u.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("calling for people"),e.next=3,O();case 3:t=e.sent,a(t);case 5:case"end":return e.stop()}}),e)})))()}),[]);var m=function(e){v(e),setTimeout((function(){v(null)}),5e3)};return Object(d.jsxs)("div",{style:{padding:100},children:[Object(d.jsx)("h1",{children:"Phonebook"}),h&&Object(d.jsx)(k,{notification:h}),Object(d.jsx)(b,{setFilter:f}),Object(d.jsx)("h2",{children:"add a new"}),Object(d.jsx)(x,{setPersons:a,persons:n,setNotification:m}),Object(d.jsx)("h2",{children:"Numbers"}),Object(d.jsx)(g,{setPersons:a,persons:n,filter:p,setNotification:m})]})};c.a.render(Object(d.jsx)(C,{}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.becc35ed.chunk.js.map